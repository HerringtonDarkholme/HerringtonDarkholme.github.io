<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>typelevel-html | Abitrarily Idiosyncratic Randomness</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Type level programming is a technique that exploits type system to represents information and logic, to the extent of language’s limit.
Since values are encoded by variable’s type, type level drives c">
<meta property="og:type" content="article">
<meta property="og:title" content="typelevel-html">
<meta property="og:url" content="http://herringtondarkholme.github.io/2014/11/01/typelevel-html/index.html">
<meta property="og:site_name" content="Abitrarily Idiosyncratic Randomness">
<meta property="og:description" content="Type level programming is a technique that exploits type system to represents information and logic, to the extent of language’s limit.
Since values are encoded by variable’s type, type level drives c">
<meta property="og:updated_time" content="2014-11-01T12:54:08.465Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="typelevel-html">
<meta name="twitter:description" content="Type level programming is a technique that exploits type system to represents information and logic, to the extent of language’s limit.
Since values are encoded by variable’s type, type level drives c">
  
    <link rel="alternative" href="/atom.xml" title="Abitrarily Idiosyncratic Randomness" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Abitrarily Idiosyncratic Randomness</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hchan&#39;s Note</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://herringtondarkholme.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-typelevel-html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/11/01/typelevel-html/" class="article-date">
  <time datetime="2014-11-01T10:26:14.000Z" itemprop="datePublished">2014-11-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      typelevel-html
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Type level programming is a technique that exploits type system to represents information and logic, to the extent of language’s limit.</p>
<p>Since values are encoded by variable’s type, type level drives compiler to validate logic or even determine program’s output.<br>All validation and computation are conducted statically at compiling phase, so the greatest benefit of type-level programming is its safety and reliability.</p>
<p>As a rule of thumb, the more dynamic code is, the more flexible it can computes. Type level programming require all logic encoded into the source code. It is to hard to cram all logic into type system, as handling whimsical input from external source is either impossible or reduce source code to unwieldy state machine. So the niche of type level programming is usually encoding, pickling or parsing.</p>
<p>But there is field where code is statically written: GUI. HTML template is hard coded in source. Type level can be used as linting and validation in html edition, especially in authoring web components. A piece of HTML fragment can be encoded in ordinary object, with type denoting its structure. Once the structure of HTMl is fixed, the output of JavaScript and css can be determined as well.<br>This is more helpful when one wants to make component. A tab-container must have tab-pane as child, and a tab-pane must live within a tab-container. Current approach of constraining HTML structure is encoding requirements in JavaScript and checking it in runtime. For example, angular uses <code>require: &#39;^parentDirective&#39;</code> to express the constraints and enable directive communication. If the component is programmatically constructed, using type annotation is a natural way to express the constraints. (As in Angular 2.0, <code>query&lt;ChildDirective&gt;</code>). We can go further in a language with full-bloomed type system.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trait Tag&#10;class Concat[A &#60;: Tag, B &#60;: Tag](a: A, b: B) extends Tag&#10;trait NestTag[A &#60;: Tag] extends Tag &#123;&#10;  type Child = A&#10;&#125;&#10;trait Inline extends Tag&#10;trait Block extends Tag&#10;case class div[T &#60;: Tag](t :T = null) extends NestTag[T] with Block&#10;case class p[T &#60;: Tag](t :T = null) extends NestTag[T] with Block&#10;case class a[T &#60;: Inline](t :T = null) extends NestTag[T] with Inline&#10;&#10;implicit class PlusTag[A &#60;: Tag](a: A) &#123;&#10;  def +[B &#60;: Tag](b: B) = new Concat(a, b)&#10;&#125;&#10;&#10;class Contains[A &#60;: Tag, C[_ &#60;: Tag] &#60;: NestTag[_], T[_ &#60;: Tag] &#60;: NestTag[_]]&#10;&#10;case class jQ[A &#60;: Tag, C[_ &#60;: Tag] &#60;: NestTag[_]](c: C[A]) &#123;&#10;  def has[T[_ &#60;: Tag] &#60;: NestTag[_]](implicit ev: Contains[A, C, T]) = true&#10;&#125;&#10;&#10;implicit def htmlEq[A &#60;: Tag, C[_ &#60;: Tag] &#60;: NestTag[_], T[_ &#60;: Tag] &#60;: NestTag[_]](implicit ev: C[A] =:= T[A]) =&#10;  new Contains[A, C, T]&#10;implicit def recurEq[A &#60;: Tag, B[_ &#60;: Tag] &#60;: NestTag[_], C[_ &#60;: Tag] &#60;: NestTag[_], T[_ &#60;: Tag] &#60;: NestTag[_]]&#10;  (implicit ev: Contains[A, B, T]) = new Contains[B[A], C, T]&#10;&#10;val ele = div(&#10;  p(&#10;    a()&#10;  )&#10;)&#10;val r = jQ(ele).has[p]&#10;println(r)</span><br></pre></td></tr></table></figure>
<p>The code above is just a demo. All html elements has type that denotes its structure. And one can tell whether a tag is in a html elemnt by calling <code>jQ(ele).has[Tag]</code>. (Note: ele is value level variable and Tag is a type level constructor.) And inline element cannot contains block element, because inline element’s child must be a subtype of <code>inline</code>.</p>
<p>Programmatical markup has several benefits:</p>
<ol>
<li>no switching between script and template</li>
<li>static type checking</li>
<li>component dependency requirements</li>
<li>component communication</li>
<li>subtyping, inheritance… Classical OOP features</li>
<li>relatively clean layout (though not as concise as Jade/Slim)</li>
</ol>
<p>The biggest problem is, well, type level templates is strongly constrained by host language. Dynamic languages simply cannot have it. Users of classical static typed language without type inference cannot afford the verbosity of deeply nested type. And languages capable of type level have different approaches and implementation towards Type Level Programming.</p>
<p>After all, type level is too crazy…, at least for daily business logic.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://herringtondarkholme.github.io/2014/11/01/typelevel-html/" data-id="cifl28ju9000hi0ejc8wrxm24" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Scala/">Scala</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/12/28/yagami/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          大雅雅于俗
        
      </div>
    </a>
  
  
    <a href="/2014/09/30/scala-operator/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Scala Generalized Type constraints</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scala/">Scala</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/">TypeScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/">Vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/misc/">misc</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Javascript/" style="font-size: 16.67px;">Javascript</a> <a href="/tags/Python/" style="font-size: 16.67px;">Python</a> <a href="/tags/Scala/" style="font-size: 20px;">Scala</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/misc/" style="font-size: 13.33px;">misc</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/10/10/typescript-ctags/">Updated Ctags for TypeScript</a>
          </li>
        
          <li>
            <a href="/2015/06/09/paamayim-nekudota/">Paamayim Nekudota Operator in ES7</a>
          </li>
        
          <li>
            <a href="/2015/01/24/scala-sam/">Explaining Scala SAM type</a>
          </li>
        
          <li>
            <a href="/2015/01/17/typescript-rant/">Rant on Typescript type guard</a>
          </li>
        
          <li>
            <a href="/2014/12/28/yagami/">大雅雅于俗</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Herrington Darkholme<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>